<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MSP430 Peripheral Driver Library: bat.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="$relpath/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="$relpath/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<table width="100%">
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border="0" src="tilogo.gif" /></a></td>
  <td bgcolor="red"><img src="titagline.gif" /></td>
</tr>
</table>
<!-- Generated by Doxygen 1.7.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">bat.c File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="bat_8h_source.html">driverlib/5xx_6xx/bat.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="hw__types_8h_source.html">inc/hw_types.h</a>&quot;</code><br/>
<code>#include &quot;msp430xgeneric.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="debug_8h_source.html">driverlib/5xx_6xx/debug.h</a>&quot;</code><br/>
</div><table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bat_8c.html#acd0ab7835fd2738e07c33130a47a89e2">BAT_unlockBackupSubSystem</a> (unsigned int baseAddress)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bat_8c.html#af25e9592f98b6c98bf682fc4788c31d2">BAT_enableBackupSupplyToADC</a> (unsigned int baseAddress)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bat_8c.html#a4d964d35fa3266d9c889a9968a272661">BAT_disableBackupSupplyToADC</a> (unsigned int baseAddress)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bat_8c.html#a9690e978d9e0a7c235f144d6027ac018">BAT_manuallySwitchToBackupSupply</a> (unsigned int baseAddress)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bat_8c.html#afeeaa352d7178b013d1844830b17aa81">BAT_disable</a> (unsigned int baseAddress)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bat_8c.html#ae3a412a50d764707d35dbe7f1e946288">BAT_chargerInitAndEnable</a> (unsigned int baseAddress, unsigned char chargerEndVoltage, unsigned char chargeCurrent)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bat_8c.html#aee4c7c7ebc0747e785e73376e6fb1d6f">BAT_disableCharger</a> (unsigned int baseAddress)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bat_8c.html#a0df43f77cfe66ef03f24163e508856d7">BAT_setBackupRAMData</a> (unsigned int baseAddress, unsigned char backupRAMSelect, unsigned int data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bat_8c.html#af164bcd790bb3ecd9df30d849f66a576">BAT_getBackupRAMData</a> (unsigned int baseAddress, unsigned char backupRAMSelect)</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="acd0ab7835fd2738e07c33130a47a89e2"></a><!-- doxytag: member="bat.c::BAT_unlockBackupSubSystem" ref="acd0ab7835fd2738e07c33130a47a89e2" args="(unsigned int baseAddress)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned short BAT_unlockBackupSubSystem </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>baseAddress</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Unlocks any pending backup input pins and RTC_B interrupts to be serviced.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">baseAddress</td><td>is the base address of the BAT module.</td></tr>
  </table>
  </dd>
</dl>
<p>This function unlocks the ability to view and service any pending backup input pin interrupts, as well as pending RTC_B interrupts. The backup sub-system can only be unlocked when the backup domain has settled, so this function returns the status of the unlock bit after it has been to be verified by user code. Please note, the backup sub-system should only be unlocked after modifying the RTC_B registers.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>BAT_UNLOCKSUCCESS if the backup subsystem has been successfully unlocked, or BAT_UNLOCKFAILURE if the backup subsystem has not yet settled. </dd></dl>

<p>References <a class="el" href="bat_8h.html#acfc0a9736c1c6e5de75d5b4c63b2e73d">BAT_UNLOCKFAILURE</a>, <a class="el" href="bat_8h.html#a2f8849dd03b67986e5755afd05da6416">BAT_UNLOCKSUCCESS</a>, and <a class="el" href="hw__types_8h.html#a084083ee12e5262f8e54bb56c15ac8c7">HWREGB</a>.</p>

</div>
</div>
<a class="anchor" id="af25e9592f98b6c98bf682fc4788c31d2"></a><!-- doxytag: member="bat.c::BAT_enableBackupSupplyToADC" ref="af25e9592f98b6c98bf682fc4788c31d2" args="(unsigned int baseAddress)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BAT_enableBackupSupplyToADC </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>baseAddress</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Enables the backup supply to be measured by the ADC battery monitor input.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">baseAddress</td><td>is the base address of the BAT module.</td></tr>
  </table>
  </dd>
</dl>
<p>This function enables the backup supply signal to be monitored by the ADC battery supply monitor input, to allow a measurement of the voltage from the backup battery.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>NONE </dd></dl>

<p>References <a class="el" href="hw__types_8h.html#a084083ee12e5262f8e54bb56c15ac8c7">HWREGB</a>.</p>

</div>
</div>
<a class="anchor" id="a4d964d35fa3266d9c889a9968a272661"></a><!-- doxytag: member="bat.c::BAT_disableBackupSupplyToADC" ref="a4d964d35fa3266d9c889a9968a272661" args="(unsigned int baseAddress)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BAT_disableBackupSupplyToADC </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>baseAddress</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Disables the backup supply input to the ADC module.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">baseAddress</td><td>is the base address of the BAT module.</td></tr>
  </table>
  </dd>
</dl>
<p>This function disables the ability to monitor the backup supply voltage from the ADC battery monitor input.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>NONE </dd></dl>

<p>References <a class="el" href="hw__types_8h.html#a084083ee12e5262f8e54bb56c15ac8c7">HWREGB</a>.</p>

</div>
</div>
<a class="anchor" id="a9690e978d9e0a7c235f144d6027ac018"></a><!-- doxytag: member="bat.c::BAT_manuallySwitchToBackupSupply" ref="a9690e978d9e0a7c235f144d6027ac018" args="(unsigned int baseAddress)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BAT_manuallySwitchToBackupSupply </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>baseAddress</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Manually switches to backup supply.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">baseAddress</td><td>is the base address of the BAT module.</td></tr>
  </table>
  </dd>
</dl>
<p>This function uses software to manually switch to the backup battery supply. Once this bit is set, it will be automatically reset by a POR and the system returns to an automatic switch to backup supply.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>NONE </dd></dl>

<p>References <a class="el" href="hw__types_8h.html#a084083ee12e5262f8e54bb56c15ac8c7">HWREGB</a>.</p>

</div>
</div>
<a class="anchor" id="afeeaa352d7178b013d1844830b17aa81"></a><!-- doxytag: member="bat.c::BAT_disable" ref="afeeaa352d7178b013d1844830b17aa81" args="(unsigned int baseAddress)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BAT_disable </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>baseAddress</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Disables backup battery system.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">baseAddress</td><td>is the base address of the BAT module.</td></tr>
  </table>
  </dd>
</dl>
<p>This function disables the battery backup system from being used. The battery backup system is reenabled after a power cycle.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>NONE </dd></dl>

<p>References <a class="el" href="hw__types_8h.html#a084083ee12e5262f8e54bb56c15ac8c7">HWREGB</a>.</p>

</div>
</div>
<a class="anchor" id="ae3a412a50d764707d35dbe7f1e946288"></a><!-- doxytag: member="bat.c::BAT_chargerInitAndEnable" ref="ae3a412a50d764707d35dbe7f1e946288" args="(unsigned int baseAddress, unsigned char chargerEndVoltage, unsigned char chargeCurrent)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BAT_chargerInitAndEnable </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>baseAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>chargerEndVoltage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>chargeCurrent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initializes and enables the backup battery charger.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">baseAddress</td><td>is the base address of the BAT module. </td></tr>
    <tr><td class="paramname">chargerEndVoltage</td><td>is the maximum voltage to charge the backup battery to. Valid values are <b>BAT_CHARGERENDVOLTAGE_VCC</b> - charges backup battery up to Vcc <b>BAT_CHARGERENDVOLTAGE2_7V</b> - charges backup battery up to 2.7V OR up to Vcc if Vcc is less than 2.7V. Modified bits are <b>BAKCHVx</b> of <b>BAKCHCTL</b> register. </td></tr>
    <tr><td class="paramname">chargeCurrent</td><td>is the maximum current to charge the backup battery at. Valid values are <b>BAT_CHARGECURRENT_5KOHM</b> <b>BAT_CHARGECURRENT_10KOHM</b> <b>BAT_CHARGECURRENT_20KOHM</b> Modified bits are <b>BAKCHCx</b> of <b>BAKCHCTL</b> register.</td></tr>
  </table>
  </dd>
</dl>
<p>This function initializes the backup battery charger with the selected settings.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>NONE </dd></dl>

<p>References <a class="el" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>.</p>

</div>
</div>
<a class="anchor" id="aee4c7c7ebc0747e785e73376e6fb1d6f"></a><!-- doxytag: member="bat.c::BAT_disableCharger" ref="aee4c7c7ebc0747e785e73376e6fb1d6f" args="(unsigned int baseAddress)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BAT_disableCharger </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>baseAddress</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Disables and resets backup battery charger settings.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">baseAddress</td><td>is the base address of the BAT module.</td></tr>
  </table>
  </dd>
</dl>
<p>This function clears all backup battery charger settings and disabes it. To renable the charger, a call to <a class="el" href="bat_8c.html#ae3a412a50d764707d35dbe7f1e946288">BAT_chargerInitAndEnable()</a> is required.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>NONE </dd></dl>

<p>References <a class="el" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>.</p>

</div>
</div>
<a class="anchor" id="a0df43f77cfe66ef03f24163e508856d7"></a><!-- doxytag: member="bat.c::BAT_setBackupRAMData" ref="a0df43f77cfe66ef03f24163e508856d7" args="(unsigned int baseAddress, unsigned char backupRAMSelect, unsigned int data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BAT_setBackupRAMData </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>baseAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>backupRAMSelect</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets data into the selected backup RAM space.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">baseAddress</td><td>is the base address of the BAT module. </td></tr>
    <tr><td class="paramname">backupRAMSelect</td><td>is the backup RAM space to set data into. Valid values are <b>BAT_RAMSELECT_0</b> <b>BAT_RAMSELECT_1</b> <b>BAT_RAMSELECT_2</b> <b>BAT_RAMSELECT_3</b> </td></tr>
    <tr><td class="paramname">data</td><td>is the data to set into the selected backup RAM space.</td></tr>
  </table>
  </dd>
</dl>
<p>This function sets the given 16-bit data into the selected backup RAM space.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>NONE </dd></dl>

<p>References <a class="el" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>.</p>

</div>
</div>
<a class="anchor" id="af164bcd790bb3ecd9df30d849f66a576"></a><!-- doxytag: member="bat.c::BAT_getBackupRAMData" ref="af164bcd790bb3ecd9df30d849f66a576" args="(unsigned int baseAddress, unsigned char backupRAMSelect)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int BAT_getBackupRAMData </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>baseAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>backupRAMSelect</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the data from the selected backup RAM space.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">baseAddress</td><td>is the base address of the BAT module. </td></tr>
    <tr><td class="paramname">backupRAMSelect</td><td>is the backup RAM space to read out from. Valid values are <b>BAT_RAMSELECT_0</b> <b>BAT_RAMSELECT_1</b> <b>BAT_RAMSELECT_2</b> <b>BAT_RAMSELECT_3</b> </td></tr>
  </table>
  </dd>
</dl>
<p>This function returns the 16-bit data currently residing in the selected backup RAM space.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Data residing in the selected backup RAM space. </dd></dl>

<p>References <a class="el" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>.</p>

</div>
</div>
</div>
<hr size="1" /><small>
Copyright  2011, Texas Instruments Incorporated</small>
</body>
</html>
